<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>python实用技巧 | 戴晶明的个人博客</title><meta name="author" content="戴晶明"><meta name="copyright" content="戴晶明"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="基本数据结构 序列分解为单独变量 对于一个可分解对象(迭代器,生成器,列表,元组,集合),我们可以直接用变量去接收里面的值 12345678910l &#x3D; [1,2,3,4,5]a,b,c,d,e &#x3D; l# 如果数量不匹配则会报错# a,b &#x3D; l   # ValueError: too many values to unpack (expected 2)# 如果我们只想要一些数据的话,可以用占位符">
<meta property="og:type" content="article">
<meta property="og:title" content="python实用技巧">
<meta property="og:url" content="https://djmnb.github.io/2023/03/14/python/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/index.html">
<meta property="og:site_name" content="戴晶明的个人博客">
<meta property="og:description" content="基本数据结构 序列分解为单独变量 对于一个可分解对象(迭代器,生成器,列表,元组,集合),我们可以直接用变量去接收里面的值 12345678910l &#x3D; [1,2,3,4,5]a,b,c,d,e &#x3D; l# 如果数量不匹配则会报错# a,b &#x3D; l   # ValueError: too many values to unpack (expected 2)# 如果我们只想要一些数据的话,可以用占位符">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://djmnb.github.io/img/site/touxiang.gif">
<meta property="article:published_time" content="2023-03-13T16:00:00.000Z">
<meta property="article:modified_time" content="2024-09-19T08:25:10.344Z">
<meta property="article:author" content="戴晶明">
<meta property="article:tag" content="需要复习">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://djmnb.github.io/img/site/touxiang.gif"><link rel="shortcut icon" href="/img/site/icon.jfif"><link rel="canonical" href="https://djmnb.github.io/2023/03/14/python/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'python实用技巧',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-19 16:25:10'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/site/touxiang.gif" onerror="onerror=null;src='/404.html'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">99</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">36</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">17</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/why"><i class="fa-fw fas fa-question"></i><span> 十万个为什么</span></a></div><div class="menus_item"><a class="site-page" href="/goodarticle"><i class="fa-fw fas fa-book"></i><span> 好文推荐</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background: /img/site/beijing.jfif"><nav id="nav"><span id="blog-info"><a href="/" title="戴晶明的个人博客"><span class="site-name">戴晶明的个人博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/why"><i class="fa-fw fas fa-question"></i><span> 十万个为什么</span></a></div><div class="menus_item"><a class="site-page" href="/goodarticle"><i class="fa-fw fas fa-book"></i><span> 好文推荐</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">python实用技巧</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-13T16:00:00.000Z" title="发表于 2023-03-14 00:00:00">2023-03-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-09-19T08:25:10.344Z" title="更新于 2024-09-19 16:25:10">2024-09-19</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>30分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="python实用技巧"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="基本数据结构">基本数据结构</h2>
<h3 id="序列分解为单独变量">序列分解为单独变量</h3>
<p>对于一个可分解对象(迭代器,生成器,列表,元组,集合),我们可以直接用变量去接收里面的值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">l = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">a,b,c,d,e = l</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果数量不匹配则会报错</span></span><br><span class="line"><span class="comment"># a,b = l   # ValueError: too many values to unpack (expected 2)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果我们只想要一些数据的话,可以用占位符(可以是任何字符,我们习惯用_),_代表占用一个 *_ 代表占用一群</span></span><br><span class="line"></span><br><span class="line">_ , a , *_ = l</span><br><span class="line"><span class="built_in">print</span>(a) <span class="comment"># 2</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果解压出来的数据里面又包含序列,我们还想解压的话,必须使用()包裹起来</p>
<p>a = [1,(2,3)]</p>
<p>b,(c,d) = a</p>
</blockquote>
<h4 id="举例实用性">举例实用性</h4>
<p>去除一个列表的最高值和最低值,求中间值的平均值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">average</span>(<span class="params">socres</span>):</span><br><span class="line">    first,*mid,last = socres</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span>(mid) / <span class="built_in">len</span>(mid)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(average([<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]))</span><br></pre></td></tr></table></figure>
<h3 id="保留最后n个元素">保留最后N个元素</h3>
<p>我们希望我们的队列中只保留最后N个元素,当元素超过N的时候就把前面的删掉,我们可以用队列实现</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"></span><br><span class="line">queue = deque(maxlen=<span class="number">5</span>)  <span class="comment"># 只保留最后五个</span></span><br><span class="line">queue.extend([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">10</span>,<span class="number">6</span>,<span class="number">7</span>])</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> queue: </span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意 append 和 extend 的区别 ,append是添加一个元素,extend是把后面这个可迭代对象拆开放进去</p>
</blockquote>
<blockquote>
<p>列表适合做栈,不适合做队列,它的出队列是o(N)时间复杂度</p>
</blockquote>
<h3 id="获得最大或者最小的n个元素">获得最大或者最小的N个元素</h3>
<p>从可迭代数据中或者最大或者最小的N个元素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"><span class="keyword">import</span> pprint</span><br><span class="line">portfolio = [</span><br><span class="line">    &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;IBM&#x27;</span>, <span class="string">&#x27;shares&#x27;</span>: <span class="number">100</span>, <span class="string">&#x27;price&#x27;</span>: <span class="number">91.1</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;AAPL&#x27;</span>, <span class="string">&#x27;shares&#x27;</span>: <span class="number">50</span>, <span class="string">&#x27;price&#x27;</span>: <span class="number">543.22</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;FB&#x27;</span>, <span class="string">&#x27;shares&#x27;</span>: <span class="number">200</span>, <span class="string">&#x27;price&#x27;</span>: <span class="number">21.09</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;HPQ&#x27;</span>, <span class="string">&#x27;shares&#x27;</span>: <span class="number">35</span>, <span class="string">&#x27;price&#x27;</span>: <span class="number">31.75</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;YHOO&#x27;</span>, <span class="string">&#x27;shares&#x27;</span>: <span class="number">45</span>, <span class="string">&#x27;price&#x27;</span>: <span class="number">16.35</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;ACME&#x27;</span>, <span class="string">&#x27;shares&#x27;</span>: <span class="number">75</span>, <span class="string">&#x27;price&#x27;</span>: <span class="number">115.65</span>&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">pprint.pprint(heapq.nsmallest(<span class="number">2</span>,portfolio,<span class="keyword">lambda</span> x:x[<span class="string">&#x27;price&#x27;</span>]))</span><br><span class="line">pprint.pprint(heapq.nlargest(<span class="number">2</span>,portfolio,<span class="keyword">lambda</span> x:x[<span class="string">&#x27;price&#x27;</span>]))</span><br></pre></td></tr></table></figure>
<p>heapq的使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line">nums = [<span class="number">10</span>,<span class="number">34</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>]</span><br><span class="line">heapq.heapify(nums)  <span class="comment"># 必须得先进行排序</span></span><br><span class="line"><span class="built_in">print</span>(heapq.heappop(nums)) <span class="comment"># 删除堆顶</span></span><br><span class="line">heapq.heappush(nums,<span class="number">20</span>) <span class="comment"># 添加一个元素</span></span><br><span class="line"><span class="built_in">print</span>(nums)</span><br></pre></td></tr></table></figure>
<h3 id="字典中的键映射多个值">字典中的键映射多个值</h3>
<p>其实就是利用列表这些数据结构当成键对应的值,然后可以往这个列表中多添加些数据,其实还是只能一个键对应一个值</p>
<p>我们可以自己这样</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;&#125;</span><br><span class="line">a.setdefault(<span class="string">&quot;name&quot;</span>,[]).append(<span class="string">&quot;djm&quot;</span>)</span><br><span class="line">a.setdefault(<span class="string">&quot;name&quot;</span>,[]).append(<span class="string">&quot;nb&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>当然,看着这么多代码还是有点不舒服的,我们就用python提供的 defaultdict吧</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line">a = defaultdict(<span class="built_in">list</span>)  <span class="comment"># 帮我们的值默认初始化为 list</span></span><br><span class="line">a[<span class="string">&quot;name&quot;</span>].append(<span class="string">&quot;djm&quot;</span>)</span><br><span class="line">a[<span class="string">&quot;name&quot;</span>].append(<span class="string">&quot;nb&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure>
<h3 id="控制字典顺序">控制字典顺序</h3>
<p>当我们遍历字典的时候,发现出来的数据并不是我们原先添加进去的顺序,因为这个用的是hash算法来放位置的,如果我们想要按添加时候的顺序来遍历数据就要用  orderdict ,它的底层多了一个双向链表,这也就意味着内存的增加,所以我们要酌情使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"></span><br><span class="line">d = OrderedDict()</span><br><span class="line">d[<span class="string">&#x27;foo&#x27;</span>] = <span class="number">1</span></span><br><span class="line">d[<span class="string">&#x27;bar&#x27;</span>] = <span class="number">2</span></span><br><span class="line">d[<span class="string">&#x27;spam&#x27;</span>] = <span class="number">3</span></span><br><span class="line">d[<span class="string">&#x27;grok&#x27;</span>] = <span class="number">4</span></span><br><span class="line"><span class="comment"># Outputs &quot;foo 1&quot;, &quot;bar 2&quot;, &quot;spam 3&quot;, &quot;grok 4&quot;</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> d:</span><br><span class="line">    <span class="built_in">print</span>(key, d[key])		</span><br></pre></td></tr></table></figure>
<h3 id="切片命名">切片命名</h3>
<p>如果对于一个固定的切片大小,而且要经常使用,我们不妨使用slice 函数来生成切片序列</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="built_in">slice</span>(<span class="number">1</span>,-<span class="number">1</span>,<span class="number">2</span>)  </span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">b = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="built_in">print</span>(a[s])</span><br><span class="line"><span class="built_in">print</span>(b[s])</span><br></pre></td></tr></table></figure>
<h3 id="counter">counter</h3>
<p>这个类可以用来对一个存放有可hash的对象的可迭代的列表进行计数,厉害的是它还可以进行数据运算,还有其他的强大的功能,比我们自己用dict 去计数要方便很多</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">a = [<span class="built_in">int</span>(random.random()*<span class="number">3</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line">b = [<span class="built_in">int</span>(random.random()*<span class="number">3</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line"><span class="built_in">print</span>(a)  <span class="comment"># [2, 2, 0, 0, 2]</span></span><br><span class="line"><span class="built_in">print</span>(b) <span class="comment"># [2, 2, 1, 1, 0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Counter跟dict的方法差不多</span></span><br><span class="line">ca = Counter(a)</span><br><span class="line">cb = Counter(b) </span><br><span class="line"><span class="built_in">print</span>(ca)  <span class="comment"># Counter(&#123;2: 3, 0: 2&#125;)</span></span><br><span class="line"><span class="built_in">print</span>(cb)  <span class="comment"># Counter(&#123;2: 2, 1: 2, 0: 1&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 求出前2个数量最多的,列表里面套元组,而且是已经排好序的</span></span><br><span class="line"><span class="built_in">print</span>(ca.most_common(<span class="number">2</span>))  <span class="comment"># [(2, 3), (0, 2)]</span></span><br><span class="line"><span class="built_in">print</span>(cb.most_common(<span class="number">2</span>))  <span class="comment">#  [(2, 2), (1, 2)]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 做数学运算</span></span><br><span class="line"><span class="built_in">print</span>(ca-cb) <span class="comment"># Counter(&#123;2: 1, 0: 1&#125;)</span></span><br><span class="line"><span class="built_in">print</span>(ca+cb) <span class="comment"># Counter(&#123;2: 5, 0: 3, 1: 2&#125;)</span></span><br></pre></td></tr></table></figure>
<h3 id="提供关键字排序函数">提供关键字排序函数</h3>
<p>在排序的时候,我们有时候会按照一些自定义规则排序,或者是使用关键字排序,我们可以使用lambda,也可以使用python提供的函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> attrgetter,itemgetter</span><br><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pprint</span><br><span class="line"></span><br><span class="line">rows = [</span><br><span class="line">    &#123;<span class="string">&#x27;fname&#x27;</span>: <span class="string">&#x27;Brian&#x27;</span>, <span class="string">&#x27;lname&#x27;</span>: <span class="string">&#x27;Jones&#x27;</span>, <span class="string">&#x27;uid&#x27;</span>: <span class="number">1003</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;fname&#x27;</span>: <span class="string">&#x27;David&#x27;</span>, <span class="string">&#x27;lname&#x27;</span>: <span class="string">&#x27;Beazley&#x27;</span>, <span class="string">&#x27;uid&#x27;</span>: <span class="number">1002</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;fname&#x27;</span>: <span class="string">&#x27;John&#x27;</span>, <span class="string">&#x27;lname&#x27;</span>: <span class="string">&#x27;Cleese&#x27;</span>, <span class="string">&#x27;uid&#x27;</span>: <span class="number">1001</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;fname&#x27;</span>: <span class="string">&#x27;Big&#x27;</span>, <span class="string">&#x27;lname&#x27;</span>: <span class="string">&#x27;Jones&#x27;</span>, <span class="string">&#x27;uid&#x27;</span>: <span class="number">1004</span>&#125;</span><br><span class="line">]</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, user_id</span>):</span><br><span class="line">        self.user_id = user_id</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;User(&#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(self.user_id)</span><br><span class="line">users = [User(<span class="number">23</span>), User(<span class="number">3</span>), User(<span class="number">99</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># itemgetter(key) 相当于 lambda x:x[key]</span></span><br><span class="line">pprint(<span class="built_in">sorted</span>(rows,key=itemgetter(<span class="string">&quot;lname&quot;</span>)))</span><br><span class="line"><span class="comment"># attrgetter(key) 相当于  lambda x:x.getter(key)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>(users, key=attrgetter(<span class="string">&quot;user_id&quot;</span>)))</span><br></pre></td></tr></table></figure>
<h3 id="根据某个字段分组">根据某个字段分组</h3>
<p>有时候我们希望根据某个字段分组,然后依次遍历这个分组,这是非常使用的一个东西,如果让我们自己来遍历的话,必须得先定义一个变量比较是否属于一个分组,这样太麻烦了,我们看看python提供的groupby函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> groupby</span><br><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</span><br><span class="line">rows = [</span><br><span class="line">    &#123;<span class="string">&#x27;address&#x27;</span>: <span class="string">&#x27;5412 N CLARK&#x27;</span>, <span class="string">&#x27;date&#x27;</span>: <span class="string">&#x27;07/01/2012&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;address&#x27;</span>: <span class="string">&#x27;5148 N CLARK&#x27;</span>, <span class="string">&#x27;date&#x27;</span>: <span class="string">&#x27;07/04/2012&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;address&#x27;</span>: <span class="string">&#x27;5800 E 58TH&#x27;</span>, <span class="string">&#x27;date&#x27;</span>: <span class="string">&#x27;07/02/2012&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;address&#x27;</span>: <span class="string">&#x27;2122 N CLARK&#x27;</span>, <span class="string">&#x27;date&#x27;</span>: <span class="string">&#x27;07/03/2012&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;address&#x27;</span>: <span class="string">&#x27;5645 N RAVENSWOOD&#x27;</span>, <span class="string">&#x27;date&#x27;</span>: <span class="string">&#x27;07/02/2012&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;address&#x27;</span>: <span class="string">&#x27;1060 W ADDISON&#x27;</span>, <span class="string">&#x27;date&#x27;</span>: <span class="string">&#x27;07/02/2012&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;address&#x27;</span>: <span class="string">&#x27;4801 N BROADWAY&#x27;</span>, <span class="string">&#x27;date&#x27;</span>: <span class="string">&#x27;07/01/2012&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;address&#x27;</span>: <span class="string">&#x27;1039 W GRANVILLE&#x27;</span>, <span class="string">&#x27;date&#x27;</span>: <span class="string">&#x27;07/04/2012&#x27;</span>&#125;,</span><br><span class="line">]</span><br><span class="line"><span class="comment"># 必须先排好序</span></span><br><span class="line">rows.sort(key=itemgetter(<span class="string">&quot;date&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据日期分组,得到每个分组里面数据,以及分组数量</span></span><br><span class="line">groups = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> date, items <span class="keyword">in</span> groupby(rows,key=itemgetter(<span class="string">&quot;date&quot;</span>)):</span><br><span class="line">    groups += <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;第<span class="subst">&#123;groups&#125;</span>分组的内容为:&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">        <span class="built_in">print</span>(item)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>记得先排好序</p>
</blockquote>
<h3 id="将下标序列变成命名序列">将下标序列变成命名序列</h3>
<p>有时候我们通过下标访问序列的方式让代码看起来很不清晰,不知道这个下标表示什么意思,我们不妨将这个序列变成命名分组,这样我们可以通过.名字的方法访问数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line"></span><br><span class="line"><span class="comment"># 名字,语文,数学</span></span><br><span class="line">Students = [</span><br><span class="line">    [<span class="string">&quot;djm&quot;</span>,<span class="number">10</span>,<span class="number">20</span>],</span><br><span class="line">    [<span class="string">&quot;dd&quot;</span>,<span class="number">80</span>,<span class="number">20</span>],</span><br><span class="line">    [<span class="string">&quot;aa&quot;</span>,<span class="number">10</span>,<span class="number">90</span>],</span><br><span class="line">    [<span class="string">&quot;cc&quot;</span>,<span class="number">100</span>,<span class="number">20</span>],</span><br><span class="line">]</span><br><span class="line"><span class="comment"># 求每个学生总分</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用下标</span></span><br><span class="line"><span class="keyword">for</span> student <span class="keyword">in</span> Students:</span><br><span class="line">    <span class="built_in">print</span>(student[<span class="number">0</span>],<span class="string">&quot;:&quot;</span>,student[<span class="number">1</span>]+student[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用命名分组</span></span><br><span class="line">Student = namedtuple(<span class="string">&quot;Student&quot;</span>,[<span class="string">&quot;name&quot;</span>,<span class="string">&quot;chinese&quot;</span>,<span class="string">&quot;math&quot;</span>])</span><br><span class="line"><span class="keyword">for</span> student <span class="keyword">in</span> Students:</span><br><span class="line">    student = Student(*student) <span class="comment"># 这里必须使用参数展开符</span></span><br><span class="line">    <span class="built_in">print</span>(student.name,<span class="string">&quot;:&quot;</span>,student.chinese+student.math)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>这种方法是不是可以让代码看起来更直观</p>
<p>记住这里生成的对象里面的数据是不可以变的,它这个对象跟元组差不多,都是不可变对象,如果非要更改,必须使用_replace方法生成一个新的对象</p>
<h3 id="合并多个字典">合并多个字典</h3>
<p>现在有多个字典或者映射，你想将它们从逻辑上合并为一个单一的映射后执行某些操作， 比如查找值或者检查某些键是否存在。其实也就是用个链表将多个dict连接起来,查找的时候从当前一直向后查找</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> ChainMap</span><br><span class="line">a = &#123;<span class="string">&#x27;x&#x27;</span>:<span class="number">1</span>,<span class="string">&#x27;y&#x27;</span>:<span class="number">2</span>&#125;</span><br><span class="line">b = &#123;<span class="string">&#x27;x&#x27;</span>:<span class="number">2</span>,<span class="string">&#x27;z&#x27;</span>:<span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line">m = ChainMap(a,b)</span><br><span class="line"><span class="built_in">print</span>(m[<span class="string">&quot;x&quot;</span>])  <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">print</span>(m[<span class="string">&quot;z&quot;</span>])  <span class="comment"># 3</span></span><br><span class="line">m[<span class="string">&quot;u&quot;</span>] = <span class="number">10</span>  <span class="comment">#  相当于 a[&quot;u&quot;] = 10</span></span><br><span class="line"><span class="built_in">print</span>(m) <span class="comment"># ChainMap(&#123;&#x27;x&#x27;: 1, &#x27;y&#x27;: 2, &#x27;u&#x27;: 10&#125;, &#123;&#x27;x&#x27;: 2, &#x27;z&#x27;: 3&#125;)</span></span><br></pre></td></tr></table></figure>
<h3 id="二分查找库">二分查找库</h3>
<p><code>bisect</code>模块提供了以下两个主要函数：</p>
<ul>
<li><code>bisect_left(a, x, lo=0, hi=len(a))</code>：在已排序的列表a中查找元素x应该插入的位置，返回值是一个整数，表示x应该插入的位置。如果x已经存在于a中，则返回与之相等的元素的左侧位置。<code>lo</code>和<code>hi</code>参数用于指定查找范围，默认是整个列表a。</li>
<li><code>bisect_right(a, x, lo=0, hi=len(a))</code>：与<code>bisect_left()</code>函数类似，但如果x已经存在于a中，则返回与之相等的元素的右侧位置。</li>
</ul>
<p>除此之外，<code>bisect</code>模块还提供了以下两个函数，用于在已排序的序列中插入元素：</p>
<ul>
<li><code>insort_left(a, x, lo=0, hi=len(a))</code>：将元素x插入到已排序的列表a中，并保持列表的升序排列。</li>
<li><code>insort_right(a, x, lo=0, hi=len(a))</code>：与<code>insort_left()</code>函数类似，但如果x已经存在于a中，则将x插入到相等元素的右侧。</li>
</ul>
<h2 id="字符串">字符串</h2>
<h3 id="指定分隔符分割字符串">指定分隔符分割字符串</h3>
<p>我们可以用字符串提供的split方法 以及 更强大的re.split方法,前者只能指定一个分隔符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">line = <span class="string">&#x27;asdf fjdk; afed, fjek,asdf, foo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只能指定一个分隔符</span></span><br><span class="line"><span class="built_in">print</span>(line.split(<span class="string">&#x27;;&#x27;</span>)) <span class="comment">#[&#x27;asdf fjdk&#x27;, &#x27; afed, fjek,asdf, foo&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(line.split(<span class="string">&#x27;,;&#x27;</span>)) <span class="comment"># [&#x27;asdf fjdk; afed, fjek,asdf, foo&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以指定多个分隔符</span></span><br><span class="line"><span class="built_in">print</span>(re.split(<span class="string">r&#x27;[ ,;]+&#x27;</span>,line)) <span class="comment">#[&#x27;asdf&#x27;, &#x27;fjdk&#x27;, &#x27;afed&#x27;, &#x27;fjek&#x27;, &#x27;asdf&#x27;, &#x27;foo&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果指定分组的话分割好的列表中会包含分隔符</span></span><br><span class="line"><span class="built_in">print</span>(re.split(<span class="string">r&#x27;([ ,;]+)&#x27;</span>,line)) <span class="comment">#[&#x27;asdf&#x27;, &#x27; &#x27;, &#x27;fjdk&#x27;, &#x27;; &#x27;, &#x27;afed&#x27;, &#x27;, &#x27;, &#x27;fjek&#x27;, &#x27;,&#x27;, &#x27;asdf&#x27;, &#x27;, &#x27;, &#x27;foo&#x27;]</span></span><br></pre></td></tr></table></figure>
<h3 id="多个开头或者结尾匹配">多个开头或者结尾匹配</h3>
<p>如果我们要看一个字符串的开头或者结尾是否满足一群要求,我们可以在endswith 或者 startswith中传递一个<strong>元组</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">&quot;http://www.baidu.com&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ishttp</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">return</span> url.startswith((<span class="string">&quot;http&quot;</span>,<span class="string">&quot;https&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(ishttp(url))</span><br><span class="line"><span class="built_in">print</span>(ishttp(<span class="string">&quot;https://www.baidu.com&quot;</span>))</span><br></pre></td></tr></table></figure>
<h3 id="使用通配符匹配字符串">使用通配符匹配字符串</h3>
<p>就像用shell里面的通配符去匹配字符串一样,我们需要使用fnmatch模块</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fnmatch</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(fnmatch.fnmatch(<span class="string">&quot;A.TXT&quot;</span>,<span class="string">&quot;*.txt&quot;</span>)) <span class="comment"># windows下为True  linux下为False</span></span><br><span class="line"><span class="built_in">print</span>(fnmatch.fnmatchcase(<span class="string">&quot;A.TXT&quot;</span>,<span class="string">&quot;*.txt&quot;</span>)) <span class="comment"># False</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="将将字符串变量变成原始字符串">将将字符串变量变成原始字符串</h3>
<p>有时候我们希望不要进行转义,就要原始字符串,有两种方法,如果是在定义的时候,可以用r加在前面,如果是一个变量,我们可以用repr函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&#x27;\n&#x27;</span> <span class="comment"># 输出换行</span></span><br><span class="line">a = <span class="built_in">repr</span>(a) <span class="comment"># \n</span></span><br><span class="line">a = <span class="string">r&#x27;\n&#x27;</span> <span class="comment"># \n</span></span><br></pre></td></tr></table></figure>
<h3 id="字符串的替换">字符串的替换</h3>
<p>有两种方法,一个是字符串自带的replace方法,还有一个就是re模块的sub方法,这个方法比较强大</p>
<p>replace定义</p>
<p><img src="/2023/03/14/python/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/../img/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7assets/image-20230317144457884.png" alt="image-20230317144457884"></p>
<p>re.sub函数定义</p>
<p><img src="/2023/03/14/python/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/../img/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7assets/image-20230317144437058.png" alt="image-20230317144437058"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&#x27;yeah, but no, but yeah, but no, but yeah&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># replace 默认全部替换,我们也可以限制替换数量</span></span><br><span class="line"><span class="built_in">print</span>(text.replace(<span class="string">&quot;yeah&quot;</span>,<span class="string">&quot;yep&quot;</span>)) <span class="comment"># yep, but no, but yep, but no, but yep</span></span><br><span class="line"><span class="built_in">print</span>(text.replace(<span class="string">&quot;yeah&quot;</span>,<span class="string">&quot;yep&quot;</span>,<span class="number">2</span>)) <span class="comment"># yep, but no, but yep, but no, but yeah</span></span><br><span class="line"></span><br><span class="line">text = <span class="string">&#x27;now is 3/17/2023, now is 3/17/2023&#x27;</span></span><br><span class="line"><span class="comment"># sub 中的 替换字符串正则表达式可以使用 匹配字符串中的分组</span></span><br><span class="line"><span class="built_in">print</span>(re.sub(<span class="string">r&quot;(\d&#123;1,2&#125;)/(\d&#123;1,2&#125;)/(\d&#123;4&#125;)&quot;</span>,<span class="string">r&#x27;\3-\2-\1&#x27;</span>,text)) <span class="comment"># now is 2023-17-3, now is 2023-17-3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 还可以指定替换数量</span></span><br><span class="line"><span class="built_in">print</span>(re.sub(<span class="string">r&quot;(\d&#123;1,2&#125;)/(\d&#123;1,2&#125;)/(\d&#123;4&#125;)&quot;</span>,<span class="string">r&#x27;\3-\2-\1&#x27;</span>,text,<span class="number">1</span>)) <span class="comment"># now is 2023-17-3, now is 3/17/2023</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果替换逻辑比较复杂,我们也可以用回调函数,函数的参数类型为 re.Match</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">m</span>): </span><br><span class="line">    <span class="built_in">print</span>(m)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;m.group(<span class="number">3</span>)&#125;</span>-<span class="subst">&#123;m.group(<span class="number">2</span>)&#125;</span>-<span class="subst">&#123;m.group(<span class="number">1</span>)&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">print</span>(re.sub(<span class="string">r&quot;(\d&#123;1,2&#125;)/(\d&#123;1,2&#125;)/(\d&#123;4&#125;)&quot;</span>,func,text)) <span class="comment"># now is 2023-17-3, now is 2023-17-3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 我们还可以用subn获得替换了多少次</span></span><br><span class="line"><span class="built_in">print</span>(re.subn(<span class="string">r&quot;(\d&#123;1,2&#125;)/(\d&#123;1,2&#125;)/(\d&#123;4&#125;)&quot;</span>,<span class="string">r&#x27;\3-\2-\1&#x27;</span>,text)) <span class="comment"># (&#x27;now is 2023-17-3, now is 2023-17-3&#x27;, 2)</span></span><br></pre></td></tr></table></figure>
<h3 id="字符与数字的相互转换">字符与数字的相互转换</h3>
<p>我们有时候需要使用一个字符的ASCII码对应的数字,也需要将一个数字对应的字符</p>
<p>使用 ord 可以将一个字符变成数字,  chr可以将数值变成字符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">chr</span>(<span class="number">69</span>)) <span class="comment"># E</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">ord</span>(<span class="string">&#x27;D&#x27;</span>)) <span class="comment"># 68</span></span><br></pre></td></tr></table></figure>
<h3 id="字符串的拼接">字符串的拼接</h3>
<p>对于少量的字符串我们可以使用 + 连接起来, 对应很多的字符串拼接我们可以使用 ‘’.join这样会快很多, join方法是将调用者为分割符,连接所有字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">a = <span class="string">&quot;10&quot;</span></span><br><span class="line">b = <span class="string">&quot;20&quot;</span></span><br><span class="line"></span><br><span class="line">n = <span class="number">1000000</span></span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line">s = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    s += a+b</span><br><span class="line">end = time.time()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;+拼接字符串耗时<span class="subst">&#123;end-start&#125;</span>s&quot;</span>) <span class="comment">#1.0576465129852295s</span></span><br><span class="line">start = time.time()</span><br><span class="line">s = <span class="string">&quot;&quot;</span></span><br><span class="line">s = s.join(a+b <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n))</span><br><span class="line">end = time.time()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;join拼接字符串耗时<span class="subst">&#123;end-start&#125;</span>s&quot;</span>) <span class="comment"># 0.15259289741516113s</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>当n的不多的时候,两者差不多,当n比较大的时候差距就明显了</p>
</blockquote>
<h3 id="字符串与字节的转换">字符串与字节的转换</h3>
<p>我们在文件操作的时候,通常要用到字符串和字节的转换</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="数字-日期-时间">数字 日期 时间</h2>
<h3 id="浮点数的精确运算">浮点数的精确运算</h3>
<p>我们都知道,使用float变量计算是肯定有误差的,我们需要使用decimal模块</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> decimal <span class="keyword">import</span> Decimal</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="number">4.2</span>+<span class="number">2.1</span>) <span class="comment">#6.300000000000001</span></span><br><span class="line"></span><br><span class="line">num = Decimal(<span class="string">&quot;4.2&quot;</span>) + Decimal(<span class="string">&quot;2.1&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(num) <span class="comment"># 6.3</span></span><br></pre></td></tr></table></figure>
<h3 id="二进制八进制十六进制十进制转化">二进制八进制十六进制十进制转化</h3>
<p>我们可以将十进制数据变成对应进制的字符串,也可以用int函数将对应的进制字符串变成10进制</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">100</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bin</span>(x)) <span class="comment">#0b1100100</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">oct</span>(x)) <span class="comment">#0o144</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(x)) <span class="comment">#0x64</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">format</span>(x,<span class="string">&#x27;b&#x27;</span>))<span class="comment">#1100100</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">format</span>(x,<span class="string">&#x27;o&#x27;</span>))<span class="comment">#144</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">format</span>(x,<span class="string">&#x27;x&#x27;</span>))<span class="comment">#64</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="number">0B1111</span>) <span class="comment"># 15</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">0O1111</span>) <span class="comment"># 585</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">0X1111</span>) <span class="comment"># 4396</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="string">&quot;1111&quot;</span>,<span class="number">2</span>)) <span class="comment">#15</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="string">&quot;1111&quot;</span>,<span class="number">8</span>)) <span class="comment">#585</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(<span class="string">&quot;1111&quot;</span>,<span class="number">16</span>)) <span class="comment">#4396</span></span><br></pre></td></tr></table></figure>
<h3 id="字节与整数的相互转换">字节与整数的相互转换</h3>
<p>你有一个字节字符串并想将它解压成一个整数。或者，你需要将一个大整数转换为一个字节字符串。</p>
<p>调用整数提供的方法</p>
<p><img src="/2023/03/14/python/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/../img/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7assets/image-20230317163713939.png" alt="image-20230317163713939"></p>
<p><img src="/2023/03/14/python/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/../img/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7assets/image-20230317163901939.png" alt="image-20230317163901939"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a =-<span class="number">128</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a.to_bytes(<span class="number">4</span>,<span class="string">&quot;big&quot;</span>,signed=<span class="literal">True</span>)) <span class="comment"># b&#x27;\xff\xff\xff\x80&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>.from_bytes(<span class="string">b&#x27;\xff\xff\xff\x80\x80&#x27;</span>,<span class="string">&quot;big&quot;</span>,signed=<span class="literal">True</span>))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>我们可以通过bit_length() 来获得需要的字节数量</p>
</blockquote>
<h3 id="无穷大和nan">无穷大和NaN</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nan = <span class="built_in">float</span>(<span class="string">&quot;Nan&quot;</span>)</span><br><span class="line">inf = <span class="built_in">float</span>(<span class="string">&quot;inf&quot;</span>)  <span class="comment"># 大小写无所谓</span></span><br><span class="line">finf = <span class="built_in">float</span>(<span class="string">&quot;-inF&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(nan)</span><br><span class="line"><span class="built_in">print</span>(inf)</span><br><span class="line"><span class="built_in">print</span>(finf)</span><br></pre></td></tr></table></figure>
<p>无穷大数在执行数学计算的时候会传播</p>
<p>NaN值会在所有操作中传播，而不会产生异常</p>
<p>NaN值的一个特别的地方时它们之间的比较操作总是返回False</p>
<p>测试一个NaN值得唯一安全的方法就是使用 <code>math.isnan()</code></p>
<h3 id="大型数组运算">大型数组运算</h3>
<p>当我们有大量的数组数据需要计算的时候,我们可以用Numpy这个库,这个库比我们用循环快很多</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">a[<span class="number">1</span>] = <span class="number">10</span></span><br><span class="line">b = np.array([<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(a)) <span class="comment">#&lt;class &#x27;numpy.ndarray&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(a+<span class="number">10</span>) <span class="comment">#[11 20 13 14 15]</span></span><br><span class="line"><span class="comment"># 注意和列表的区别</span></span><br><span class="line"><span class="built_in">print</span>(a*<span class="number">2</span>) <span class="comment"># [ 2 20  6  8 10]</span></span><br><span class="line"></span><br><span class="line">a = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]]</span><br><span class="line">a = np.array(a)</span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">1</span>,<span class="number">1</span>]) <span class="comment"># 这里也是numpy独有的  5</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>numpy有很多厉害的功能,这里就不介绍了,上面这些都只是数组的运算,而不是矩阵的运算,我们得用matrix去产生矩阵</p>
</blockquote>
<h3 id="随机选择">随机选择</h3>
<p>从一个序列中随机抽取若干元素，或者想生成几个随机数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机选一个</span></span><br><span class="line"><span class="built_in">print</span>(random.choice(a))</span><br><span class="line"><span class="comment"># 随机选多个,可以包含位置的数</span></span><br><span class="line"><span class="built_in">print</span>(random.choices(a,k=<span class="number">3</span>))</span><br><span class="line"><span class="comment"># 随机选出多个不同位置的数,注意是位置,如果列表中的数不同,选出来的数肯定也不相同</span></span><br><span class="line"><span class="built_in">print</span>(random.sample(a,<span class="number">3</span>))</span><br><span class="line"><span class="comment"># 打乱顺序</span></span><br><span class="line">random.shuffle(a)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 随机产生一个[a,b]之间的整数</span></span><br><span class="line"><span class="built_in">print</span>(random.randint(<span class="number">10</span>,<span class="number">20</span>))</span><br><span class="line"><span class="comment"># 随机产生一个[0,1)的小数</span></span><br><span class="line"><span class="built_in">print</span>(random.random())</span><br></pre></td></tr></table></figure>
<h3 id="日期与时间的转换">日期与时间的转换</h3>
<p>有时候需要得到时间信息,以及时间之间的转换,我们可以用datetime模块,这个模块可以自己处理闰年</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="comment"># timedelta代表的是一个时间段,可以设置天数,小时,分钟,秒,毫秒,微秒  小时会被转化成秒,微秒会转化成秒</span></span><br><span class="line">fivedays = datetime.timedelta(days=<span class="number">5</span>)</span><br><span class="line">tendays = <span class="number">2</span>*fivedays  <span class="comment"># 可以执行基本运算</span></span><br><span class="line"><span class="built_in">print</span>(tendays.days)  <span class="comment"># 得到天数 10</span></span><br><span class="line"><span class="built_in">print</span>(tendays.seconds) <span class="comment"># 0s</span></span><br><span class="line"><span class="built_in">print</span>(tendays.total_seconds())  <span class="comment"># 得到全部秒数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#日期的运算</span></span><br><span class="line">datea = datetime.datetime(<span class="number">2002</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">dateb = datetime.datetime(<span class="number">2001</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 运算结果是一个时间段,a-b 和 b-a结果一样</span></span><br><span class="line">subdate = dateb-datea</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>((datea-dateb).days) <span class="comment"># 相差了 365天</span></span><br><span class="line"><span class="built_in">print</span>((datea-dateb).seconds) <span class="comment"># 0s</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># adddate = datea + dateb 日期与日期不支持加法</span></span><br><span class="line"></span><br><span class="line">datec = datea + fivedays   <span class="comment">#  日期与时间段支持加法</span></span><br><span class="line"><span class="built_in">print</span>(datec)   <span class="comment"># 2002-4-10</span></span><br><span class="line"></span><br><span class="line">datec = datetime.datetime(<span class="number">2023</span>,<span class="number">3</span>,<span class="number">17</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(datec.year)</span><br><span class="line"><span class="built_in">print</span>(datec.month)</span><br><span class="line"><span class="built_in">print</span>(datec.day)</span><br><span class="line"><span class="built_in">print</span>(datec.weekday())  <span class="comment"># 从0开始的 0代表星期一</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算上个周五的日期</span></span><br><span class="line">now = datetime.datetime.now()</span><br><span class="line">prefive = now-datetime.timedelta(<span class="number">7</span>-(now.weekday()-<span class="number">4</span>))</span><br><span class="line"><span class="built_in">print</span>(prefive.date())</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果涉及大量的日期时间计算,推荐使用第三方包,calendar是用来打印日历这些的</p>
</blockquote>
<h2 id="迭代器和生成器">迭代器和生成器</h2>
<h3 id="使用生成器代替迭代器">使用生成器代替迭代器</h3>
<p>如果用迭代器的话,我们需要自己去维护很多状态,而使用生成器,就方便很多了,它会自己保存好局部变量</p>
<p>我们来对比一下吧</p>
<h4 id="自己实现迭代器">自己实现迭代器</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,value</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self._value = value</span><br><span class="line">        self.left = <span class="literal">None</span></span><br><span class="line">        self.right = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setleft</span>(<span class="params">self,node</span>):</span><br><span class="line">        self.left = node</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setright</span>(<span class="params">self,node</span>):</span><br><span class="line">        self.right = node</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> helpIterator(self)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;node(<span class="subst">&#123;self._value&#125;</span>)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">helpIterator</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,node</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self.node = node</span><br><span class="line">        self.leftiter = <span class="literal">None</span></span><br><span class="line">        self.rightiter = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> self.node == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">raise</span> StopIteration</span><br><span class="line">        <span class="keyword">if</span> self.leftiter <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self.leftiter = <span class="built_in">iter</span>(helpIterator(self.node.left))</span><br><span class="line">            <span class="keyword">return</span> self.node</span><br><span class="line">        <span class="keyword">elif</span> self.rightiter <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                value = <span class="built_in">next</span>(self.leftiter)</span><br><span class="line">                <span class="keyword">return</span> value</span><br><span class="line">            <span class="keyword">except</span> StopIteration <span class="keyword">as</span> s:</span><br><span class="line">                self.rightiter = <span class="built_in">iter</span>(helpIterator(self.node.right))</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">next</span>(self)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">next</span>(self.rightiter)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root = Node(<span class="number">10</span>)</span><br><span class="line">root.setleft(Node(<span class="number">11</span>))</span><br><span class="line">root.setright(Node(<span class="number">12</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> val <span class="keyword">in</span> root:</span><br><span class="line">    <span class="built_in">print</span>(val)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="使用生成器生成迭代器">使用生成器生成迭代器</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,value</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self._value = value</span><br><span class="line">        self.left = <span class="literal">None</span></span><br><span class="line">        self.right = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setleft</span>(<span class="params">self,node</span>):</span><br><span class="line">        self.left = node</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setright</span>(<span class="params">self,node</span>):</span><br><span class="line">        self.right = node</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">yield</span> self</span><br><span class="line">        <span class="keyword">if</span> self.left <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">from</span> <span class="built_in">iter</span>(self.left)</span><br><span class="line">        <span class="keyword">if</span> self.right <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">from</span> <span class="built_in">iter</span>(self.right)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;node(<span class="subst">&#123;self._value&#125;</span>)&quot;</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">root = Node(<span class="number">10</span>)</span><br><span class="line">left = Node(<span class="number">11</span>)</span><br><span class="line">right = Node(<span class="number">14</span>)</span><br><span class="line">root.setleft(left)</span><br><span class="line">root.setright(right)</span><br><span class="line">left.setleft(Node(<span class="number">12</span>))</span><br><span class="line">left.setright(Node(<span class="number">13</span>))</span><br><span class="line">right.setleft(Node(<span class="number">15</span>))</span><br><span class="line">right.setright(Node(<span class="number">16</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> val <span class="keyword">in</span> root:</span><br><span class="line">    <span class="built_in">print</span>(val)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>对比一下,真是节省了不少代码啊,太牛了</p>
</blockquote>
<h3 id="反向迭代">反向迭代</h3>
<p>反向迭代必须实现__reversed()__方法,它的返回值也必须是一个具有__next()__方法的对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">test</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">            <span class="keyword">yield</span> i</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__reversed__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>,<span class="number">0</span>,-<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">yield</span> i</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">reversed</span>(test())))</span><br></pre></td></tr></table></figure>
<h3 id="itertools">itertools</h3>
<h4 id="islice">islice</h4>
<p>我们可能只需要迭代器的一部分数据,那么我们可以使用itertools.islice方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">testiter</span>():</span><br><span class="line">    n = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">        <span class="keyword">yield</span> n</span><br><span class="line">        n += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">it = testiter()</span><br><span class="line"><span class="comment"># 它的用法跟range差不多</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(itertools.islice(it,<span class="number">10</span>,<span class="number">20</span>))) <span class="comment">#[10, 11, 12, 13, 14, 15, 16, 17, 18, 19]</span></span><br></pre></td></tr></table></figure>
<h4 id="dropwhile">dropwhile</h4>
<p>跳过某些符合要求的的数据直到一个不符合要求的数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">testiter</span>():</span><br><span class="line">   a = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>)]</span><br><span class="line">   <span class="keyword">yield</span> <span class="keyword">from</span> a</span><br><span class="line"></span><br><span class="line">it = testiter()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当数据小于5的时候就丢弃</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(itertools.dropwhile(<span class="keyword">lambda</span> x:x&lt;<span class="number">5</span>,it))) <span class="comment"># [5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]</span></span><br></pre></td></tr></table></figure>
<h4 id="排列与组合">排列与组合</h4>
<p>permutations 可以进行排列  combinations可以进行组合</p>
<p><img src="/2023/03/14/python/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/../img/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7assets/image-20230318144612500.png" alt="image-20230318144612500"></p>
<p>​													<img src="/2023/03/14/python/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/../img/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7assets/image-20230318144807813.png" alt="image-20230318144807813"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line">l = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 选取前N个数据进行排列</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> itertools.permutations(l,<span class="number">3</span>): </span><br><span class="line">    <span class="built_in">print</span>(i)  <span class="comment"># 返回的是一个元组</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 选取N个数据进行组合,N个数据不能选取同一个位置</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> itertools.combinations(l,<span class="number">2</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选取N个数据进行组合,N个数据能选取同一个位置</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> itertools.combinations_with_replacement(l,<span class="number">2</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>要注意他们的区别哦   另外如果元素里面有相同的数据,使用这个方法得到的结果并不正确</p>
</blockquote>
<h3 id="迭代索引">迭代索引</h3>
<p>我们发现使用迭代器并没有记录我们当前是第几个,如果我们需要索引可以使用enumerate函数,这个函数使用起来就很优雅了,我们不需要额外定义一个变量去计数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">for</span> index,num <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">range</span>(<span class="number">10</span>,<span class="number">0</span>,-<span class="number">1</span>),<span class="number">1</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;第<span class="subst">&#123;index&#125;</span>个数:<span class="subst">&#123;num&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># 第1个数:10</span></span><br><span class="line"><span class="comment"># 第2个数:9</span></span><br><span class="line"><span class="comment"># 第3个数:8</span></span><br><span class="line"><span class="comment"># 第4个数:7</span></span><br><span class="line"><span class="comment"># 第5个数:6</span></span><br><span class="line"><span class="comment"># 第6个数:5</span></span><br><span class="line"><span class="comment"># 第7个数:4</span></span><br><span class="line"><span class="comment"># 第8个数:3</span></span><br><span class="line"><span class="comment"># 第9个数:2</span></span><br><span class="line"><span class="comment"># 第10个数:1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="同时迭代多个序列">同时迭代多个序列</h3>
<p>我们可以使用zip函数同时迭代多个序列,但是迭代次数以最短的为主</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i,j <span class="keyword">in</span> <span class="built_in">zip</span>(<span class="built_in">range</span>(<span class="number">10</span>),<span class="built_in">range</span>(<span class="number">11</span>,<span class="number">0</span>,-<span class="number">1</span>)):</span><br><span class="line">    <span class="built_in">print</span>((i,j))</span><br><span class="line"></span><br><span class="line"><span class="comment"># (0, 11)</span></span><br><span class="line"><span class="comment"># (1, 10)</span></span><br><span class="line"><span class="comment"># (2, 9)</span></span><br><span class="line"><span class="comment"># (3, 8)</span></span><br><span class="line"><span class="comment"># (4, 7)</span></span><br><span class="line"><span class="comment"># (5, 6)</span></span><br><span class="line"><span class="comment"># (6, 5)</span></span><br><span class="line"><span class="comment"># (7, 4)</span></span><br><span class="line"><span class="comment"># (8, 3)</span></span><br><span class="line"><span class="comment"># (9, 2)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果需要最长的为主的话</span></span><br><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"><span class="keyword">for</span> i,j <span class="keyword">in</span> itertools.zip_longest(<span class="built_in">range</span>(<span class="number">10</span>),<span class="built_in">range</span>(<span class="number">11</span>,<span class="number">0</span>,-<span class="number">1</span>)):</span><br><span class="line">	<span class="built_in">print</span>((i,j))</span><br><span class="line">        </span><br><span class="line"><span class="comment"># (0, 11)</span></span><br><span class="line"><span class="comment"># (1, 10)</span></span><br><span class="line"><span class="comment"># (2, 9)</span></span><br><span class="line"><span class="comment"># (3, 8)</span></span><br><span class="line"><span class="comment"># (4, 7)</span></span><br><span class="line"><span class="comment"># (5, 6)</span></span><br><span class="line"><span class="comment"># (6, 5)</span></span><br><span class="line"><span class="comment"># (7, 4)</span></span><br><span class="line"><span class="comment"># (8, 3)</span></span><br><span class="line"><span class="comment"># (9, 2)</span></span><br><span class="line"><span class="comment"># (None, 1)</span></span><br></pre></td></tr></table></figure>
<h3 id="连续迭代不同集合">连续迭代不同集合</h3>
<p>如果我们对不同的集合里面的数据有相同操作,我平时肯定是写两段相同的代码,或者是拼接起来,这样都不是最好的选择,我们可以使用chain</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">b = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 循环求和</span></span><br><span class="line">sums = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line">    sums += i</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> b:</span><br><span class="line">    sums += i</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(sums)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用加法</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(a+b))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用chain</span></span><br><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(itertools.chain(a,b)))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>chain 比加法要快,而且使用加法对于集合,有时候可不是那么友好,毕竟有去重功能</p>
</blockquote>
<h3 id="按顺序连续迭代不同序列">按顺序连续迭代不同序列</h3>
<p>如果我们有两个序列,他们都是有序的,但是我们想将他们合并然后使用,如果让我们自己来,肯定还要判断大小,我们不妨使用heapq.merge</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line">a = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">9</span>]</span><br><span class="line">b = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">11</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(heapq.merge(a,b))) <span class="comment"># [1, 2, 3, 4, 6, 8, 8, 9, 10, 11]</span></span><br></pre></td></tr></table></figure>
<h3 id="使用迭代器代替while">使用迭代器代替while</h3>
<p>使用iter函数,如果所给参数不是一个可迭代对象而是一个函数的话,那么会一直调用这个函数,直到返回值满足要求</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 根据输入求和,直到输入quit</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(<span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">iter</span>(<span class="built_in">input</span>,<span class="string">&quot;quit&quot;</span>))))</span><br></pre></td></tr></table></figure>
<h2 id="文件与io">文件与io</h2>
<blockquote>
<p>其实对于文件读写的文本模式与二进制模式, 文本模式只能写入字符串, 二进制模式只能写入字节,  其实本质没有什么区别,都是写入01数据, 之所以二进制模式会乱码是因为我们写入了多字节数据,比如整数 ,文本编辑器打开的时候将这些多个字节拆分来译码,那当然就会造成乱码了,如果我们只写写入字符串,无论哪种模式,只要跟文本编辑器的编码一样,那就都不会乱码</p>
</blockquote>
<h3 id="输出重定向">输出重定向</h3>
<p>我们可以将print的输出内容写入到文件里面去,必须是文本模式,如果是二进制模式的话,会出错,因为文本模式与二进制模式打开的文件对象不是一样的,他们的写入方法需要的参数有区别,一个是字符串,一个是字节数据,而print只能传递字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>,<span class="string">&quot;wt&quot;</span>,encoding=<span class="string">&quot;UTF-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(a,file=f)</span><br></pre></td></tr></table></figure>
<h3 id="模拟文件io">模拟文件io</h3>
<p>我们可以通过 io 模块的StringIO 和 BytesIO 来模拟文件IO,在一些单元测试中用得着</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io</span><br><span class="line"></span><br><span class="line">files = io.StringIO(<span class="string">&quot;helloworld&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(files.read())</span><br><span class="line"></span><br><span class="line">fileb = io.BytesIO(<span class="string">b&#x27;hello world&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(fileb.read())</span><br></pre></td></tr></table></figure>
<h3 id="读写压缩文件">读写压缩文件</h3>
<p>导入相应的模块就行了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gzip</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> gzip.<span class="built_in">open</span>(<span class="string">&quot;test.gz&quot;</span>,<span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="string">b&quot;12345&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="os中相关的函数">os中相关的函数</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">filepath = <span class="string">r&quot;C:\Users\asus\Desktop\hexoblog\source\_posts\python\代码文件\python实用技巧\迭代器跟生成器\ostest.py&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(os.path.basename(filepath)) <span class="comment"># 文件名字 ostest.py</span></span><br><span class="line"><span class="built_in">print</span>(os.path.dirname(filepath))  <span class="comment"># 目录名字</span></span><br><span class="line"><span class="built_in">print</span>(os.path.isabs(filepath))    <span class="comment"># 是否是绝对路径  True</span></span><br><span class="line"><span class="built_in">print</span>(os.path.isdir(filepath))    <span class="comment"># 是否是目录 False</span></span><br><span class="line"><span class="built_in">print</span>(os.path.isfile(filepath))   <span class="comment"># 是否是文件 True</span></span><br><span class="line"><span class="built_in">print</span>(os.path.islink(filepath))   <span class="comment"># 是否是链接文件 False</span></span><br><span class="line"><span class="built_in">print</span>(os.path.ismount(filepath))  <span class="comment"># 是否是挂载文件 False</span></span><br><span class="line"><span class="built_in">print</span>(os.path.exists(filepath))   <span class="comment"># 文件是否存在  True</span></span><br><span class="line"><span class="built_in">print</span>(os.path.getsize(filepath))  <span class="comment"># 文件大小</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">strftime</span>(<span class="params">seconds</span>):</span><br><span class="line">    <span class="keyword">return</span> time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>,time.localtime(seconds))</span><br><span class="line"><span class="built_in">print</span>(strftime(os.path.getatime(filepath)))  <span class="comment"># 上一次文件访问时间</span></span><br><span class="line"><span class="built_in">print</span>(strftime(os.path.getmtime(filepath)))  <span class="comment"># 上一次文件修改时间</span></span><br><span class="line"><span class="built_in">print</span>(strftime(os.path.getctime(filepath)))  <span class="comment"># 上一次文件元信息修改时间 比如文件名字更改 文件权限变化</span></span><br></pre></td></tr></table></figure>
<ol>
<li><code>os.rename(src, dst)</code>：重命名文件或目录，将src改名为dst。</li>
<li><code>os.stat(path)</code>：获取指定路径的文件或目录的状态信息。</li>
<li><code>os.access(path, mode)</code>：检查指定路径的文件或目录是否有指定的权限。</li>
<li><code>os.chmod(path, mode)</code>：修改指定路径的文件或目录的权限。</li>
<li><code>os.utime(path, times)</code>：修改指定路径的文件或目录的访问和修改时间。</li>
<li><code>os.walk(top, topdown=True, onerror=None, followlinks=False)</code>：遍历指定目录及其子目录中的所有文件和目录。</li>
<li><code>os.environ</code>：一个包含环境变量的字典对象。</li>
<li><code>os.getenv(var)</code>：获取指定环境变量的值。</li>
<li><code>os.putenv(var, value)</code>：设置指定环境变量的值。</li>
<li><code>os.system(command)</code>：在命令行上执行指定的命令。</li>
<li><code>os.startfile(path)</code>：使用关联程序打开指定的文件。</li>
<li><code>os.popen(command[, mode[, bufsize]])</code>：打开一个管道用于读取命令的输出。</li>
<li><code>os.pipe()</code>：创建一个管道并返回两个文件描述符，一个用于读取，一个用于写入。</li>
<li><code>os.dup(fd)</code>：复制文件描述符。</li>
<li><code>os.execl(path, arg0, arg1, ..., argN)</code>：替换当前进程的映像，使用指定的可执行文件。</li>
<li><code>os.abort()</code>：生成异常，中止当前进程。</li>
<li><code>os.kill(pid, signal)</code>：发送指定的信号给进程。</li>
<li><code>os.waitpid(pid, options)</code>：等待指定的子进程结束并返回其状态。</li>
<li><code>os.getpid()</code>：获取当前进程的ID。</li>
<li><code>os.getppid()</code>：获取当前进程的父进程ID。</li>
<li><code>os.getuid()</code>：获取当前进程的用户ID。</li>
<li><code>os.getgid()</code>：获取当前进程的组ID。</li>
<li><code>os.setuid(uid)</code>：设置当前进程的用户ID。</li>
<li><code>os.setgid(gid)</code>：设置当前进程的组ID。</li>
<li><code>os.system()</code>：在新进程中执行系统命令。</li>
<li><code>os.times()</code>：获取当前进程的CPU时间和系统时间等信息。</li>
<li><code>os.cpu_count()</code>：获取当前系统的CPU核心数。</li>
<li><code>os.listdir(path)</code>：返回指定目录下的文件和目录列表。</li>
<li><code>os.link(src, dst)</code>：创建指向现有文件的硬链接。</li>
<li><code>os.symlink(src, dst)</code>：创建指向现有文件的符号链接。</li>
</ol>
<h2 id="元编程">元编程</h2>
<h3 id="让装饰器保留函数元信息">让装饰器保留函数元信息</h3>
<p>普通的装饰器并不会保留函数的元信息,比如name doc 这些,我们可以使用functools里面的wraps装饰器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">logger</span>(<span class="params">func</span>):</span><br><span class="line"><span class="meta">    @wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args,**kwds</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;func&#125;</span>被调用&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> func(*args,**kwds)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@logger</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a,b</span>):</span><br><span class="line">   a-=<span class="number">1</span></span><br><span class="line">   b-=<span class="number">1</span></span><br><span class="line">   <span class="keyword">return</span> a+b</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(func.__name__)  <span class="comment"># 如果不使用wraps会输出wrapper,使用wraps会输出func</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果使用了wraps, 我们还可以通过 func.__wrapped__得到原始函数</p>
</blockquote>
<h3 id="属性描述符">属性描述符</h3>
<p>既然是属性描述符,它当然是描述一个属性, 而且这个属性必须是<strong>类的属性</strong>,有了属性描述符,我们就可以对这个属性进行限制,检查</p>
<p>如果一个类实现了__get__ 方法,他就是一个属性描述符,比如一个function类,属性描述符只有在类或者对象通过点的方式去调用才会生效</p>
<p>因此我们可以解释为什么对象调用方法不用写self参数, function对象就是一个属性描述符,  它会帮我们执行的时候自动加入self参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">test</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">hello</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">t = test()</span><br><span class="line"><span class="built_in">print</span>(t.hello,test.hello,sep=<span class="string">&quot;\n&quot;</span>) </span><br><span class="line"><span class="comment"># &lt;bound method test.hello of &lt;__main__.test object at 0x00000236D2D2E4C0&gt;&gt;</span></span><br><span class="line"><span class="comment"># &lt;function test.hello at 0x00000236D2D81700&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们发现这两个方法并不一样,这是因为在function 里面的 get方法返回的值不一样导致的</p>
<h2 id="包和模块">包和模块</h2>
<h3 id="运行目录或者压缩文件">运行目录或者压缩文件</h3>
<p>如果我们在目录中定义了__main__文件的话,我们就可以使用 python 目录名字 这样的方式运行目录 , 如果我们的压缩包也包含__main__文件的话,我们也可以直接使用 python 压缩包的方式运行</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://djmnb.github.io">戴晶明</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://djmnb.github.io/2023/03/14/python/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/">https://djmnb.github.io/2023/03/14/python/python%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://djmnb.github.io" target="_blank">戴晶明的个人博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E9%9C%80%E8%A6%81%E5%A4%8D%E4%B9%A0/">需要复习</a><a class="post-meta__tags" href="/tags/python/">python</a></div><div class="post_share"><div class="social-share" data-image="/img/site/touxiang.gif" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/03/24/python/Django%E5%AD%A6%E4%B9%A0/" title="Django 学习"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Django 学习</div></div></a></div><div class="next-post pull-right"><a href="/2023/03/04/python/Python%E7%BC%96%E7%A8%8B%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B-%E8%AE%A9%E7%B9%81%E7%90%90%E5%B7%A5%E4%BD%9C%E8%87%AA%E5%8A%A8%E5%8C%96/" title="Python编程快速上手 总结"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Python编程快速上手 总结</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/03/04/python/Python%E7%BC%96%E7%A8%8B%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B-%E8%AE%A9%E7%B9%81%E7%90%90%E5%B7%A5%E4%BD%9C%E8%87%AA%E5%8A%A8%E5%8C%96/" title="Python编程快速上手 总结"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-04</div><div class="title">Python编程快速上手 总结</div></div></a></div><div><a href="/2023/06/12/C%E5%92%8CC++/MFC/" title="MFC学习"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-12</div><div class="title">MFC学习</div></div></a></div><div><a href="/2023/06/22/C%E5%92%8CC++/c++/" title="c++"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-22</div><div class="title">c++</div></div></a></div><div><a href="/2023/06/12/C%E5%92%8CC++/c%E8%AF%AD%E8%A8%80/" title="c语言学习"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-12</div><div class="title">c语言学习</div></div></a></div><div><a href="/2023/06/27/English/%E8%AF%AD%E6%B3%95/" title="考研英语语法"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-27</div><div class="title">考研英语语法</div></div></a></div><div><a href="/2022/11/25/git/git%E6%80%BB%E7%BB%93/" title="git"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-25</div><div class="title">git</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/site/touxiang.gif" onerror="this.onerror=null;this.src='/404.html'" alt="avatar"/></div><div class="author-info__name">戴晶明</div><div class="author-info__description">不积跬步,无以至千里</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">99</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">36</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">17</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="/img/site/weixin.jpg" target="_blank" title="WeChat"><i class="fab fa-weixin"></i></a><a class="social-icon" href="/img/site/qq.jpg" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎光临</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.</span> <span class="toc-text">基本数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%88%86%E8%A7%A3%E4%B8%BA%E5%8D%95%E7%8B%AC%E5%8F%98%E9%87%8F"><span class="toc-number">1.1.</span> <span class="toc-text">序列分解为单独变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BE%E4%BE%8B%E5%AE%9E%E7%94%A8%E6%80%A7"><span class="toc-number">1.1.1.</span> <span class="toc-text">举例实用性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%9D%E7%95%99%E6%9C%80%E5%90%8En%E4%B8%AA%E5%85%83%E7%B4%A0"><span class="toc-number">1.2.</span> <span class="toc-text">保留最后N个元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%BE%97%E6%9C%80%E5%A4%A7%E6%88%96%E8%80%85%E6%9C%80%E5%B0%8F%E7%9A%84n%E4%B8%AA%E5%85%83%E7%B4%A0"><span class="toc-number">1.3.</span> <span class="toc-text">获得最大或者最小的N个元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E4%B8%AD%E7%9A%84%E9%94%AE%E6%98%A0%E5%B0%84%E5%A4%9A%E4%B8%AA%E5%80%BC"><span class="toc-number">1.4.</span> <span class="toc-text">字典中的键映射多个值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%AD%97%E5%85%B8%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.5.</span> <span class="toc-text">控制字典顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%87%E7%89%87%E5%91%BD%E5%90%8D"><span class="toc-number">1.6.</span> <span class="toc-text">切片命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#counter"><span class="toc-number">1.7.</span> <span class="toc-text">counter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E4%BE%9B%E5%85%B3%E9%94%AE%E5%AD%97%E6%8E%92%E5%BA%8F%E5%87%BD%E6%95%B0"><span class="toc-number">1.8.</span> <span class="toc-text">提供关键字排序函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E6%9F%90%E4%B8%AA%E5%AD%97%E6%AE%B5%E5%88%86%E7%BB%84"><span class="toc-number">1.9.</span> <span class="toc-text">根据某个字段分组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E4%B8%8B%E6%A0%87%E5%BA%8F%E5%88%97%E5%8F%98%E6%88%90%E5%91%BD%E5%90%8D%E5%BA%8F%E5%88%97"><span class="toc-number">1.10.</span> <span class="toc-text">将下标序列变成命名序列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%88%E5%B9%B6%E5%A4%9A%E4%B8%AA%E5%AD%97%E5%85%B8"><span class="toc-number">1.11.</span> <span class="toc-text">合并多个字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E5%BA%93"><span class="toc-number">1.12.</span> <span class="toc-text">二分查找库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">2.</span> <span class="toc-text">字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E5%88%86%E9%9A%94%E7%AC%A6%E5%88%86%E5%89%B2%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">2.1.</span> <span class="toc-text">指定分隔符分割字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E4%B8%AA%E5%BC%80%E5%A4%B4%E6%88%96%E8%80%85%E7%BB%93%E5%B0%BE%E5%8C%B9%E9%85%8D"><span class="toc-number">2.2.</span> <span class="toc-text">多个开头或者结尾匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E5%8C%B9%E9%85%8D%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">2.3.</span> <span class="toc-text">使用通配符匹配字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E5%B0%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8F%98%E9%87%8F%E5%8F%98%E6%88%90%E5%8E%9F%E5%A7%8B%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">2.4.</span> <span class="toc-text">将将字符串变量变成原始字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%9B%BF%E6%8D%A2"><span class="toc-number">2.5.</span> <span class="toc-text">字符串的替换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%8E%E6%95%B0%E5%AD%97%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2"><span class="toc-number">2.6.</span> <span class="toc-text">字符与数字的相互转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%8B%BC%E6%8E%A5"><span class="toc-number">2.7.</span> <span class="toc-text">字符串的拼接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E5%AD%97%E8%8A%82%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="toc-number">2.8.</span> <span class="toc-text">字符串与字节的转换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%AD%97-%E6%97%A5%E6%9C%9F-%E6%97%B6%E9%97%B4"><span class="toc-number">3.</span> <span class="toc-text">数字 日期 时间</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E6%95%B0%E7%9A%84%E7%B2%BE%E7%A1%AE%E8%BF%90%E7%AE%97"><span class="toc-number">3.1.</span> <span class="toc-text">浮点数的精确运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%85%AB%E8%BF%9B%E5%88%B6%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E5%8D%81%E8%BF%9B%E5%88%B6%E8%BD%AC%E5%8C%96"><span class="toc-number">3.2.</span> <span class="toc-text">二进制八进制十六进制十进制转化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E4%B8%8E%E6%95%B4%E6%95%B0%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.3.</span> <span class="toc-text">字节与整数的相互转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A0%E7%A9%B7%E5%A4%A7%E5%92%8Cnan"><span class="toc-number">3.4.</span> <span class="toc-text">无穷大和NaN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E5%9E%8B%E6%95%B0%E7%BB%84%E8%BF%90%E7%AE%97"><span class="toc-number">3.5.</span> <span class="toc-text">大型数组运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E9%80%89%E6%8B%A9"><span class="toc-number">3.6.</span> <span class="toc-text">随机选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E4%B8%8E%E6%97%B6%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.7.</span> <span class="toc-text">日期与时间的转换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">4.</span> <span class="toc-text">迭代器和生成器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%94%9F%E6%88%90%E5%99%A8%E4%BB%A3%E6%9B%BF%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="toc-number">4.1.</span> <span class="toc-text">使用生成器代替迭代器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%B7%B1%E5%AE%9E%E7%8E%B0%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="toc-number">4.1.1.</span> <span class="toc-text">自己实现迭代器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%94%9F%E6%88%90%E5%99%A8%E7%94%9F%E6%88%90%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="toc-number">4.1.2.</span> <span class="toc-text">使用生成器生成迭代器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%90%91%E8%BF%AD%E4%BB%A3"><span class="toc-number">4.2.</span> <span class="toc-text">反向迭代</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#itertools"><span class="toc-number">4.3.</span> <span class="toc-text">itertools</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#islice"><span class="toc-number">4.3.1.</span> <span class="toc-text">islice</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dropwhile"><span class="toc-number">4.3.2.</span> <span class="toc-text">dropwhile</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E5%88%97%E4%B8%8E%E7%BB%84%E5%90%88"><span class="toc-number">4.3.3.</span> <span class="toc-text">排列与组合</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E7%B4%A2%E5%BC%95"><span class="toc-number">4.4.</span> <span class="toc-text">迭代索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%97%B6%E8%BF%AD%E4%BB%A3%E5%A4%9A%E4%B8%AA%E5%BA%8F%E5%88%97"><span class="toc-number">4.5.</span> <span class="toc-text">同时迭代多个序列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E7%BB%AD%E8%BF%AD%E4%BB%A3%E4%B8%8D%E5%90%8C%E9%9B%86%E5%90%88"><span class="toc-number">4.6.</span> <span class="toc-text">连续迭代不同集合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E9%A1%BA%E5%BA%8F%E8%BF%9E%E7%BB%AD%E8%BF%AD%E4%BB%A3%E4%B8%8D%E5%90%8C%E5%BA%8F%E5%88%97"><span class="toc-number">4.7.</span> <span class="toc-text">按顺序连续迭代不同序列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%BB%A3%E6%9B%BFwhile"><span class="toc-number">4.8.</span> <span class="toc-text">使用迭代器代替while</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8Eio"><span class="toc-number">5.</span> <span class="toc-text">文件与io</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">5.1.</span> <span class="toc-text">输出重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E6%8B%9F%E6%96%87%E4%BB%B6io"><span class="toc-number">5.2.</span> <span class="toc-text">模拟文件io</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%86%99%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6"><span class="toc-number">5.3.</span> <span class="toc-text">读写压缩文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#os%E4%B8%AD%E7%9B%B8%E5%85%B3%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">5.4.</span> <span class="toc-text">os中相关的函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%83%E7%BC%96%E7%A8%8B"><span class="toc-number">6.</span> <span class="toc-text">元编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A9%E8%A3%85%E9%A5%B0%E5%99%A8%E4%BF%9D%E7%95%99%E5%87%BD%E6%95%B0%E5%85%83%E4%BF%A1%E6%81%AF"><span class="toc-number">6.1.</span> <span class="toc-text">让装饰器保留函数元信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-number">6.2.</span> <span class="toc-text">属性描述符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%85%E5%92%8C%E6%A8%A1%E5%9D%97"><span class="toc-number">7.</span> <span class="toc-text">包和模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E7%9B%AE%E5%BD%95%E6%88%96%E8%80%85%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6"><span class="toc-number">7.1.</span> <span class="toc-text">运行目录或者压缩文件</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/28/%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%85%B3/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" title="内网穿透">内网穿透</a><time datetime="2025-04-27T16:00:00.000Z" title="发表于 2025-04-28 00:00:00">2025-04-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/10/python/transformer/" title="transformer及其变体学习">transformer及其变体学习</a><time datetime="2025-04-09T16:00:00.000Z" title="发表于 2025-04-10 00:00:00">2025-04-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/03/python/python%E5%9C%BA%E6%99%AF%E6%96%B9%E6%A1%88%E8%A7%A3%E5%86%B3/" title="python场景方案解决">python场景方案解决</a><time datetime="2025-04-03T06:50:09.195Z" title="发表于 2025-04-03 14:50:09">2025-04-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/09/python/python%E5%8C%85%E5%AD%A6%E4%B9%A0/" title="python常用包学习">python常用包学习</a><time datetime="2025-03-08T16:00:00.000Z" title="发表于 2025-03-09 00:00:00">2025-03-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/11/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/%E7%BB%8F%E5%85%B8%E6%A8%A1%E5%9E%8B/" title="目标检测领域的经典模型">目标检测领域的经典模型</a><time datetime="2024-12-10T16:00:00.000Z" title="发表于 2024-12-11 00:00:00">2024-12-11</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2025 By 戴晶明</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'BkV10wtzbo9nuKwtsBG04Idw-gzGzoHsz',
      appKey: 'CLv4OkdYGyropWktyqSDf2af',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !false) {
    if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>